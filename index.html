<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yemek KarÅŸÄ±laÅŸtÄ±rÄ±cÄ±</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #eef2f7; font-family: 'Segoe UI', sans-serif; }
        .main-title { color: #2c3e50; font-weight: 800; letter-spacing: 1px; margin-top: 20px;}
        .date-badge { background-color: #34495e; color: #fff; padding: 8px 20px; border-radius: 50px; font-size: 0.9rem; }
        .card-custom { border: none; border-radius: 20px; box-shadow: 0 8px 30px rgba(0,0,0,0.08); overflow: hidden; height: 100%; }
        .school-header { background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 20px;}
        .dorm-header { background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; padding: 20px;}
        .meal-section { background-color: #fff; padding: 15px; margin-bottom: 15px; border-radius: 12px; border: 1px solid #f0f0f0;}
        .meal-title { font-size: 0.85rem; font-weight: 700; color: #95a5a6; text-transform: uppercase; margin-bottom: 10px; border-bottom: 2px solid #f1f2f6; padding-bottom: 5px; }
        .food-item { font-size: 1.05rem; color: #34495e; margin-bottom: 6px; display: flex; align-items: start; }
        .food-item::before { content: "â€¢"; color: #bdc3c7; margin-right: 10px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container py-4">
    <div class="text-center mb-5">
        <h1 class="main-title">BugÃ¼n Ne Yesek? ğŸ½ï¸</h1>
        <span id="tarih-gostergesi" class="date-badge mt-2 d-inline-block">YÃ¼kleniyor...</span>
    </div>
    
    <div class="row g-4 justify-content-center" id="content-area">
        <div class="col-12 text-center py-5">
            <div class="spinner-grow text-primary" role="status"></div>
            <p class="mt-3 text-muted">MenÃ¼ler taranÄ±yor...</p>
        </div>
    </div>
</div>

<script>
    fetch('/api/menuler')
        .then(response => response.json())
        .then(data => {
            document.getElementById('tarih-gostergesi').innerText = data.tarih;
            const container = document.getElementById('content-area');
            
            const listHTML = (items) => {
                if(!items || items.length === 0 || items[0] === "MenÃ¼ Yok") 
                    return '<div class="text-muted fst-italic small ms-3">Bu Ã¶ÄŸÃ¼n iÃ§in menÃ¼ girilmemiÅŸ.</div>';
                return items.map(i => `<div class="food-item">${i}</div>`).join('');
            };

            container.innerHTML = `
                <!-- OKUL KARTI -->
                <div class="col-md-5">
                    <div class="card card-custom">
                        <div class="card-header school-header text-center">
                            <h2 class="h4 m-0 fw-bold">ğŸ« Okul Yemekhanesi</h2>
                        </div>
                        <div class="card-body p-4 bg-light">
                            <div class="meal-section">
                                <div class="meal-title">â˜€ï¸ Ã–ÄŸle YemeÄŸi</div>
                                ${listHTML(data.okul.ogle)}
                            </div>
                            <div class="meal-section mb-0">
                                <div class="meal-title">ğŸŒ™ AkÅŸam YemeÄŸi</div>
                                ${listHTML(data.okul.aksam)}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- YURT KARTI -->
                <div class="col-md-5">
                    <div class="card card-custom">
                        <div class="card-header dorm-header text-center">
                            <h2 class="h4 m-0 fw-bold">ğŸ›ï¸ Yurt Yemekhanesi</h2>
                        </div>
                        <div class="card-body p-4 bg-light">
                            <div class="meal-section">
                                <div class="meal-title">â˜• KahvaltÄ±</div>
                                ${listHTML(data.yurt.kahvalti)}
                            </div>
                            <div class="meal-section mb-0">
                                <div class="meal-title">ğŸŒ™ AkÅŸam YemeÄŸi</div>
                                ${listHTML(data.yurt.aksam)}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        })
        .catch(err => {
            console.error(err);
            document.getElementById('content-area').innerHTML = 
                `<div class="col-12 text-center text-danger"><h3>Hata OluÅŸtu!</h3><p>Terminali kontrol et, hata mesajÄ± orada yazar.</p></div>`;
        });
</script>

</body>
</html>